<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="author" content="jacketzc"><meta name="renderer" content="webkit"><meta name="copyright" content="jacketzc"><meta name="keywords" content="jacketzc的blog"><meta name="description" content="java，分布式，vue，idea，多线程开发，mybatis，spring，ssm，SpringMVC,dubbox ,Spring Cloud"><meta name="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>jacketzc's Blog</title><link rel="stylesheet" href="/css/style.css?v=2018.7.9"><link rel="stylesheet" href="/css/animation.css?v=2018.7.9"><link rel="icon" href="/img/assets/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><!-- scripts--><script>(function( w ){
  "use strict";
  // rel=preload support test
  if( !w.loadCSS ){
    w.loadCSS = function(){};
  }
  // define on the loadCSS obj
  var rp = loadCSS.relpreload = {};
  // rel=preload feature support test
  // runs once and returns a function for compat purposes
  rp.support = (function(){
    var ret;
    try {
      ret = w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      ret = false;
    }
    return function(){
      return ret;
    };
  })();

  // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
  // then change that media back to its intended value on load
  rp.bindMediaToggle = function( link ){
    // remember existing media attr for ultimate state, or default to 'all'
    var finalMedia = link.media || "all";

    function enableStylesheet(){
      link.media = finalMedia;
    }

    // bind load handlers to enable media
    if( link.addEventListener ){
      link.addEventListener( "load", enableStylesheet );
    } else if( link.attachEvent ){
      link.attachEvent( "onload", enableStylesheet );
    }

    // Set rel and non-applicable media type to start an async request
    // note: timeout allows this to happen async to let rendering continue in IE
    setTimeout(function(){
      link.rel = "stylesheet";
      link.media = "only x";
    });
    // also enable media after 3 seconds,
    // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
    setTimeout( enableStylesheet, 3000 );
  };

  // loop through link elements in DOM
  rp.poly = function(){
    // double check this to prevent external calls from running
    if( rp.support() ){
      return;
    }
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      // qualify links to those with rel=preload and as=style attrs
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
        // prevent rerunning on link
        link.setAttribute( "data-loadcss", true );
        // bind listeners to toggle media back
        rp.bindMediaToggle( link );
      }
    }
  };

  // if unsupported, run the polyfill
  if( !rp.support() ){
    // run once at least
    rp.poly();

    // rerun poly on an interval until onload
    var run = w.setInterval( rp.poly, 500 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    } else if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
  }


  // commonjs
  if( typeof exports !== "undefined" ){
    exports.loadCSS = loadCSS;
  }
  else {
    w.loadCSS = loadCSS;
  }
}( typeof global !== "undefined" ? global : this ) );</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer></script><script src="/js/main.js?v=2018.7.9" defer></script><!-- fancybox--><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script><!-- busuanzi--><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><meta name="generator" content="Hexo 5.0.0"></head><body><section class="profile-close" id="cxo-profile"><div class="profile-avatar"><i class="fa fa-caret-left"></i><img src="/img/assets/cat.png"></div><!--.profile-saying
  i.fa.fa-comment
  .saying--><div class="cxo-profile-inner"><div class="profile-name">jacketzc</div><div class="friends"><div>FRIENDS</div><span><a href="//github.com/Longlongyu" target="_black">Longlongyu</a></span></div><div class="read-progress"></div></div></section><header id="cxo-intro" style="height: 70vh;background-image: url(/img/intro/index-bg.png);"><nav id="cxo-intro-nav"><section><div class="intro-nav-title"><a href="/">jacketzc's Blog</a></div><div class="intro-nav-label-box"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div><i class="fa fa-bars intro-nav-menu"><div class="intro-nav-drop"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div></i><div class="clear"></div></section></nav><h1>jacketzc's Blog</h1><h5>Welcome to my Blog!</h5><div class="intro-social"><a class="fa fa-envelope" href="mailto://jacketzc@foxmail.com" title="email"></a><a class="fa fa-github" href="//gitee.com/BlackLighting/" target="_blank" title="github"></a><a class="fa fa-twitter" href="//twitter.com/jacketzc" target="_blank" title="twitter"></a></div></header><article class="cxo-up" id="cxo-content-outer"><section id="cxo-content-inner"><section id="recent-posts"><div class="recent-post-item"><div class="post-title"><a href="/2020/09/14/1.6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86%E5%99%A8/">1.6配置自定义方法参数处理器</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-14T08:27:00.000Z">2020-09-14</time></div><div class="recent-post-content">1.6配置自定义方法参数处理器
## 作用用于在控制器接口入参的时候，处理参数和拦截器类似，不过拦截的是入参和拦截器配置的方法差不多## 设置实现该功能的类创建实现HandlerMethodArgumentResolver接口的类该类有两个重载方法boolean supportsParameter ：判断入参是否满足要求返回true将继续执行下一个方法，如果返回false，则跳过Object resolveArgument ：处理参数，并且视情况返回示范 ：从request中提取userVo添加到控制器接口入参public class CurrentUserComplete implement ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/14/1.6%E9%85%8D%E7%BD%AE%E8%87%AA%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86%E5%99%A8/#more">ReadMore</a></div><hr></div><div class="recent-post-item"><div class="post-title"><a href="/2020/09/14/9.1%E7%99%BB%E5%BD%95token/">9.1登录token</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-14T05:50:00.000Z">2020-09-14</time></div><div class="recent-post-content">9.1登录token
## 目的用户访问某些资源的时候，需要检验是否为登录状态验证token后，需要将token中携带的某些信息提取出来token是写入redis的数据，key为session，value为userVo## 生成token验证登录生成token、存入redis（需要一个过期时间）使用sessionId作为token，此操作将使得浏览器关闭打开后token失效token作为key存入redis，值为用户的信息（对象转换为json作为value存入redis）将token返回给前台## 验证tokentoken应该放在header中传递给后台使用swagger时，在文档管理-全局参 ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/14/9.1%E7%99%BB%E5%BD%95token/#more">ReadMore</a></div><hr></div><div class="recent-post-item"><div class="post-title"><a href="/2020/09/11/8.1%E4%BD%BF%E7%94%A8nginx%E8%BF%9B%E8%A1%8C%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/">8.1使用nginx进行负载均衡</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-11T05:57:00.000Z">2020-09-11</time></div><div class="recent-post-content">8.1使用nginx进行负载均衡
## 反向代理将外部请求执行某种操作后发送给某个consumer（响应请求的controller）和Dubbo的区别在于，dubbo是将consumer的请求转发给provider## 安装nginx依赖安装：yum install gccyum install pcre pcre-develyum install zlib zlib-develyum install openssl openssl-devel解压nginx源码包，进入目录执行./configure此步骤将配置nginx使用默认配置makemake install添加服务：先备份nginx.c ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/11/8.1%E4%BD%BF%E7%94%A8nginx%E8%BF%9B%E8%A1%8C%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/#more">ReadMore</a></div><hr></div><div class="recent-post-item"><div class="post-title"><a href="/2020/09/10/4.2springboot%E9%BB%98%E8%AE%A4%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BAmybatis%E7%9A%84sql/">4.2springboot默认日志输出mybatis的sql</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-10T05:57:00.000Z">2020-09-10</time></div><div class="recent-post-content">4.2springboot默认日志输出mybatis的sql
## 默认日志spring boot默认使用日志log back## 方法在使用mybatis的模块（如果是微服务的话，就是provider的application.properties）中添加配置：logging.level.mapper包的全路径=debug示范：logging.level.com.jac.dubboxdemo.provider.mapper=DEBUG或者：添加以下配置：mybatis.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutI ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/10/4.2springboot%E9%BB%98%E8%AE%A4%E6%97%A5%E5%BF%97%E8%BE%93%E5%87%BAmybatis%E7%9A%84sql/#more">ReadMore</a></div><hr></div><div class="recent-post-item"><div class="post-title"><a href="/2020/09/08/7.5%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E6%88%90%E5%8A%9F%E8%83%BD/">7.5微服务集成功能</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-08T08:58:00.000Z">2020-09-08</time></div><div class="recent-post-content">7.5微服务集成功能
## 思路dubbo将项目切割为consumer：消费者（也就是controller）provider：提供者（也就是serviceImpl、mapper）interface：接口（service）所以呢，原来项目中需要使用的各个模块将按照上方的思路添加仅仅某个模块需要的项目可以## 集成jackson因为provider中的序列化（比如redis序列化）以及消费者（返回json）都需要，所以应该放到根项目中，当然这已经包含在web-starter中了## 集成mybatis在provider中按照spring boot集成方式集成mybatis详情见 3.1在sprin ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/08/7.5%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%9B%86%E6%88%90%E5%8A%9F%E8%83%BD/#more">ReadMore</a></div><hr></div><div class="recent-post-item"><div class="post-title"><a href="/2020/09/08/7.4%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%EF%BC%88%E5%9F%BA%E4%BA%8Edubbo%EF%BC%89/">7.4创建一个微服务项目（基于dubbo）</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-08T01:55:00.000Z">2020-09-08</time></div><div class="recent-post-content">7.4创建一个微服务项目（基于dubbo）
## 创建根项目创建一个springboot项目（有必要话可以修改&lt;parent&gt;中版本控制器的spring boot版本，本项目使用的spring boot版本为1.5.9）删除所有的依赖（删掉所有的&lt;dependency&gt;）删除所有的插件（将整个&lt;build&gt;标签删掉）删除idea项目中除了pom.xml的所有目录与文件随后点击maven更新生成一个空的项目框架指定根项目的打包方式为pom（&lt;packaging&gt;pom&lt;/packaging&gt;）## 创建生产者（provider）模块右击 ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/08/7.4%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%A1%B9%E7%9B%AE%EF%BC%88%E5%9F%BA%E4%BA%8Edubbo%EF%BC%89/#more">ReadMore</a></div><hr></div><div class="recent-post-item"><div class="post-title"><a href="/2020/09/08/7.2dubbo%E4%BB%A5%E5%8F%8Adubbo%20admin/">7.2dubbo以及dubbo admin</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-08T01:08:00.000Z">2020-09-08</time></div><div class="recent-post-content">7.2dubbo以及dubbo admin
## 说明    Dubbo是一款高性能、轻量级的开源Java RPC框架，它提供了三大核心能力：面向接口的远程方法调用，智能容错和负载均衡，以及服务自动注册和发现。默认端口：7001## 工作原理provider服务提供者：一般为业务层（service）consumer服务消费者：一般为控制层（controller）接口dubbo要求consumer接口在调用provider的方法时，引入的是interface而不是实现类registry服务注册中心monitor服务监控中心## dubbo-admindubbo-admin本质上是一个spring ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/08/7.2dubbo%E4%BB%A5%E5%8F%8Adubbo%20admin/#more">ReadMore</a></div><hr></div><div class="recent-post-item"><div class="post-title"><a href="/2020/09/08/7.3zookeeper/">7.3zookeeper</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-08T01:01:00.000Z">2020-09-08</time></div><div class="recent-post-content">7.3zookeeper
## 说明zookeeper是dubbo的一个常用的注册中心，注册中心可以说是微服务架构中的”通讯录“，它记录了服务和服务地址的映射关系。在分布式架构中，服务会注册到这里，当服务需要调用其它服务时，就这里找到服务的地址，进行调用。## 配置主配置文件为conf目录下的zoo.cfg# CS通信心跳数-服务器之间或客户端与服务器之间维持心跳的时间间隔tickTime=2000 # LF初始通信时限# 服务器之间 初始连接 时能容忍的最多心跳数initLimit=10# TLF同步通信时限# 请求和应答 之间能容忍的最多心跳数syncLimit=5# the direct ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/08/7.3zookeeper/#more">ReadMore</a></div><hr></div><div class="recent-post-item"><div class="post-title"><a href="/2020/09/07/2.5redis%E6%8C%81%E4%B9%85%E5%8C%96/">2.5redis持久化</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-07T08:22:00.000Z">2020-09-07</time></div><div class="recent-post-content">2.5redis持久化
规则，## 方案RDB：在指定的的时间间隔对数据进行快照存储AOF：记录每次对服务器读写操作，当服务器重启的时候会重新执行这些命令类回复数据## RDB配置//如果想要禁用RDB配置，也是非常容易的，只需要在save的最后一行写上：save &quot;&quot;save xxx x翻译一下：在xxx秒内有x条写入命令，就触发产生一次快照（备份）save 200 5可以配置多条该规则，适用于不同redis写入状况的配置（这些规则不会互相矛盾）dbfilename dump.rdb指定备份的文件名称dir /home/work/app/redis/data/指定备份文件 ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/07/2.5redis%E6%8C%81%E4%B9%85%E5%8C%96/#more">ReadMore</a></div><hr></div><div class="recent-post-item"><div class="post-title"><a href="/2020/09/07/1.17%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/">1.17设计思想</a></div><div class="post-time"><i class="fa fa-table"></i><time datetime="2020-09-07T07:32:00.000Z">2020-09-07</time></div><div class="recent-post-content">1.17设计思想
## 控制层永不处理业务逻辑控制层只负责接受请求、然后调用业务层的方法、然后返回任何与业务逻辑相关的代码应该下放到业务层（哪怕是1+1）## 程序永远可能出错！在控制层使用最大的Exception包裹需要处理的业务代码，如果一切顺利，返回success的返回类型，如果发生异常，返回相应的自定义错误代码示例：public ReturnResult generateOrder( @RequestBody OrderInfoParam param) {    int code = 0;    try {        code = service.generateOrder(par ...</div><div class="recent-post-tags"><a class="post-tag fa fa-tag" href="javascript:void(0)" date-tags="分布式微服务"> 分布式微服务</a></div><div class="read-more"><a class="more" href="/2020/09/07/1.17%E8%AE%BE%E8%AE%A1%E6%80%9D%E6%83%B3/#more">ReadMore</a></div><hr></div></section><nav class="cxo-page-nav"><a class="extend prev" rel="prev" href="/page/3/">&lt; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" href="/page/5/">下一页 &gt;</a></nav></section></article><footer id="cxo-footer-outer"><div id="cxo-footer-inner"><p class="footer-container"><span>Site by </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span> | theme </span><a target="_blank" rel="noopener" href="https://github.com/Longlongyu/hexo-theme-Cxo"><span>Cxo</span></a></p><i class="fa fa-user"> </i><span id="busuanzi_value_site_uv"></span><span> | </span><i class="fa fa-eye"> </i><span id="busuanzi_value_site_pv"></span></div></footer><!-- catelog--><!-- top--><i class="fa fa-arrow-up close" id="go-up" aria-hidden="true"></i></body></html>