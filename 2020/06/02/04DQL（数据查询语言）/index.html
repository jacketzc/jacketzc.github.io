<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><meta name="author" content="jacketzc"><meta name="renderer" content="webkit"><meta name="copyright" content="jacketzc"><meta name="keywords" content="jacketzc的blog"><meta name="description" content="java，分布式，vue，idea，多线程开发，mybatis，spring，ssm，SpringMVC,dubbox ,Spring Cloud"><meta name="Cache-Control" content="no-cache"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>04DQL（数据查询语言） · jacketzc's Blog</title><link rel="stylesheet" href="/css/style.css?v=2018.7.9"><link rel="stylesheet" href="/css/animation.css?v=2018.7.9"><link rel="icon" href="/img/assets/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css?version=1.5.6"><!-- scripts--><script>(function( w ){
  "use strict";
  // rel=preload support test
  if( !w.loadCSS ){
    w.loadCSS = function(){};
  }
  // define on the loadCSS obj
  var rp = loadCSS.relpreload = {};
  // rel=preload feature support test
  // runs once and returns a function for compat purposes
  rp.support = (function(){
    var ret;
    try {
      ret = w.document.createElement( "link" ).relList.supports( "preload" );
    } catch (e) {
      ret = false;
    }
    return function(){
      return ret;
    };
  })();

  // if preload isn't supported, get an asynchronous load by using a non-matching media attribute
  // then change that media back to its intended value on load
  rp.bindMediaToggle = function( link ){
    // remember existing media attr for ultimate state, or default to 'all'
    var finalMedia = link.media || "all";

    function enableStylesheet(){
      link.media = finalMedia;
    }

    // bind load handlers to enable media
    if( link.addEventListener ){
      link.addEventListener( "load", enableStylesheet );
    } else if( link.attachEvent ){
      link.attachEvent( "onload", enableStylesheet );
    }

    // Set rel and non-applicable media type to start an async request
    // note: timeout allows this to happen async to let rendering continue in IE
    setTimeout(function(){
      link.rel = "stylesheet";
      link.media = "only x";
    });
    // also enable media after 3 seconds,
    // which will catch very old browsers (android 2.x, old firefox) that don't support onload on link
    setTimeout( enableStylesheet, 3000 );
  };

  // loop through link elements in DOM
  rp.poly = function(){
    // double check this to prevent external calls from running
    if( rp.support() ){
      return;
    }
    var links = w.document.getElementsByTagName( "link" );
    for( var i = 0; i < links.length; i++ ){
      var link = links[ i ];
      // qualify links to those with rel=preload and as=style attrs
      if( link.rel === "preload" && link.getAttribute( "as" ) === "style" && !link.getAttribute( "data-loadcss" ) ){
        // prevent rerunning on link
        link.setAttribute( "data-loadcss", true );
        // bind listeners to toggle media back
        rp.bindMediaToggle( link );
      }
    }
  };

  // if unsupported, run the polyfill
  if( !rp.support() ){
    // run once at least
    rp.poly();

    // rerun poly on an interval until onload
    var run = w.setInterval( rp.poly, 500 );
    if( w.addEventListener ){
      w.addEventListener( "load", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    } else if( w.attachEvent ){
      w.attachEvent( "onload", function(){
        rp.poly();
        w.clearInterval( run );
      } );
    }
  }


  // commonjs
  if( typeof exports !== "undefined" ){
    exports.loadCSS = loadCSS;
  }
  else {
    w.loadCSS = loadCSS;
  }
}( typeof global !== "undefined" ? global : this ) );</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js" defer></script><script src="/js/main.js?v=2018.7.9" defer></script><!-- fancybox--><link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" defer></script><!-- busuanzi--><script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><meta name="generator" content="Hexo 5.0.0"></head><body><section class="profile-close" id="cxo-profile"><div class="profile-avatar"><i class="fa fa-caret-left"></i><img src="/img/assets/cat.png"></div><!--.profile-saying
  i.fa.fa-comment
  .saying--><div class="cxo-profile-inner"><div class="profile-name">jacketzc</div><div class="friends"><div>FRIENDS</div><span><a href="//github.com/Longlongyu" target="_black">Longlongyu</a></span></div><div class="read-progress"></div></div></section><header id="cxo-intro" style="height: 70vh;background-image: url(/img/intro/index-bg.png);"><nav id="cxo-intro-nav"><section><div class="intro-nav-title"><a href="/">jacketzc's Blog</a></div><div class="intro-nav-label-box"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div><i class="fa fa-bars intro-nav-menu"><div class="intro-nav-drop"><a href="/">Home</a><a href="/about/">About</a><a href="/archives/">Archives</a><a href="/tags/">Tags</a></div></i><div class="clear"></div></section></nav><h1 class="post-title">04DQL（数据查询语言）</h1><div class="post-intros"><div class="post-intro-meta"><span class="post-intro-time"><i class="post-intro-calendar fa fa-calendar"></i><span>2020-06-02</span></span><span class="post-intro-tags"><a class="intro-tag fa fa-tag" href="javascript:void(0)" date-tags="mysql"> mysql</a></span></div><div class="post-intro-read"><span> Word count: <span class="post-count">1.7k</span> | Reading time: <span class="post-count">6</span>min</span></div></div></header><article class="cxo-up" id="cxo-content-outer"><section id="cxo-content-inner"><article class="article-entry" id="post"><h1>04DQL（数据查询语言）</h1>
<span><div><span style="font-size: 14pt;">基本语法</span></div><div><span style="font-size: 14pt;">select [all|distinct] {* | table.* | [table.field1 [as alias]]</span></div><div><font style="font-size: 14pt;"><br/></font></div><div><span style="font-size: 14pt;">#查询表中的所有列</span></div><div><span style="font-size: 14pt;">select * from students;</span></div><div><span style="font-size: 14pt;">#查询部分列，多列之间使用“,”隔开</span></div><div><span style="font-size: 14pt;">select stu_no,stu_name,sex from students;</span></div><div><span style="font-size: 14pt;">//可以在列中添加表名：students.stu_no（一般省略）</span></div><div><span style="font-size: 14pt;">#为查询的结果起别名（）</span></div><div><span style="font-size: 14pt;">select stu.stu_no as 学号,stu.stu_name 姓名 from students as stu;</span></div><div><span style="font-size: 14pt;">//关键字：as</span></div><div><span style="font-size: 14pt;">//as可以省略</span></div><div><span style="font-size: 14pt;">//给表起别名方便区分不同表中的相同列</span></div><div><span style="font-size: 14pt;">//给列起别名的目的：</span></div><div><span style="font-size: 14pt;">    1.中文别名</span></div><div><span style="font-size: 14pt;">    2.为表达式添加别名，如：</span></div><div><span style="font-size: 14pt;">        select stu_no+10 'new_stu' from students;</span></div><div><span style="font-size: 14pt;">//别名不需要使用引号包裹，遇到保留字符时，正反引号都可以</span></div><div><span style="font-size: 14pt;">//任何类表达式都可以取别名（子查询结果也可以）</span></div><div><span style="font-size: 14pt;">//<span style="font-size: 14pt; color: rgb(30, 204, 255);">对查询结果的列使用别名似乎只有输出的作用</span></span></div><div><span style="font-size: 14pt;">#去除查询结果中的重复记录</span></div><div><span style="font-size: 14pt;">select distinct subj_no from result;</span></div><div><span style="font-size: 14pt;">//多余的subj_no数据将会被去除</span></div><div><span style="font-size: 14pt;">#查询条件或者结果带表达式</span></div><div><span style="font-size: 14pt;">select 100*100 as resu from dual</span></div><div><span style="font-size: 14pt;">select * from students where stu_pwd <span style="font-size: 14pt; color: rgb(30, 204, 255);">is null</span></span></div><div><span style="font-size: 14pt;">select now(),current_timestamp(),sysdate() from dual</span></div><div><span style="font-size: 14pt;">select * from employees where salary&gt;10000/10</span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(255, 0, 0);">//减少在有变量的一边使用表达式，以防止出现不可预期的错误</span></span></div><div><span style="font-size: 14pt;">select md5('123') from dual</span></div><div><span style="font-size: 14pt;">#模糊查询</span></div><div><span style="font-size: 14pt;">//关键字：like</span></div><div><span style="font-size: 14pt;">//匹配符：%（代表0-多个字符的占位）</span></div><div><span style="font-size: 14pt;">                _（代表一个字符的占位）</span></div><div><span style="font-size: 14pt;">//不建议使用左模糊（会导致索引失效）</span></div><div><span style="font-size: 14pt;">select * from subjects where subj_name like ‘高等%’</span></div><div><span style="font-size: 14pt;">select * from students where stu_name like '李%'</span></div><div><span style="font-size: 14pt;">#在几个具体值内（不超过1000个）</span></div><div><span style="font-size: 14pt;">//关键字：in</span></div><div><span style="font-size: 14pt;">select * from subjects where class_hour in (100,111)</span></div><div><span style="font-size: 14pt;">#排除查询</span></div><div><span style="font-size: 14pt;">select * from students where stu_name not like '李%'</span></div><div><span style="font-size: 14pt;">select * from subjects where class_hour not in (100,111)</span></div><div><span style="font-size: 14pt;">//<span style="font-size: 14pt; color: rgb(255, 70, 53);">not in不会排除空值！</span></span></div><div><span style="font-size: 14pt;">#查询空值</span></div><div><span style="font-size: 14pt;">//关键字：is null或者is not null</span></div><div><span style="font-size: 14pt;">//空值不等同于''或者0！</span></div><div><span style="font-size: 18.6667px; text-align: center;">select * from students where stu_pwd is null</span></div><div><span style="font-size: 18.6667px; text-align: center;">#使用查询语句作为表达式（</span><span style="font-size: 18.6667px; color: rgb(30, 204, 255);">子查询</span><span style="font-size: 18.6667px; text-align: center;">）</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">select</span><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> stu_no </span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(163, 21, 21); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">'姓“李”同学学号'</span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">,stu_result </span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(163, 21, 21); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">'姓“李”同学成绩'</span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> </span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">from</span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> result</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">where</span><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> stu_no </span><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">in</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">(</span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">select</span><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> stu_no </span><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">from</span><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> students</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">where</span><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> stu_name </span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">like</span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> </span><span style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre; color: rgb(163, 21, 21); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">'李%'</span><span style="font-size: 22px; white-space: pre; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">)</span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(255, 0, 0);">//注：当查询语句作为表达式时必须使用括号将查询语句包裹！</span></span></div><div><span style="font-size: 14pt;">//使用子查询的时候，只能指定一个列</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(30, 204, 255);">#连接查询</span></span></span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(255, 0, 0);">//要点：</span></span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(255, 0, 0);">1.从不同的表中获取多列数据</span></span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(255, 0, 0);">2.需要的数据在两张表中有连接（两张表中的某个字段相等之类）</span></span></div><div><span style="font-size: 14pt;">//每次数据库查询都会消耗资源，所以需要尽量减少sql的调用次数</span></div><div><span style="font-size: 14pt;">#<span style="font-size: 14pt; color: rgb(26, 173, 224);">内连接</span></span></div><div><span style="font-size: 14pt;">#等值连接查询：语法：[inner] join 表 on 连接条件（两张表中相同含义的字段）</span></div><div><span style="font-size: 14pt;">//一般多表连接查询需要给表取别名</span></div><div><span style="font-size: 14pt;">select</span> <span style="font-size: 14pt; color: rgb(30, 204, 255);">s.subj_name,s.grage_id,g.grade_name</span> <span style="font-size: 14pt;">from subjects s join grade g on s.grade_id=g.grade_id</span></div><div><span style="font-size: 14pt;">//建议查询的条件全部加上表别名加以区分（唯一值不必区分，共有值必须区分，否则报错）</span></div><div><span style="font-size: 14pt;">#等值查询的等价写法：</span></div><div><span style="background-color: rgb(255, 255, 255); font-size: 22px;"><span style="background-color: rgb(255, 255, 255); font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">select</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> s.subj_name,</span></span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">    s.grade_id,</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">    g.grade_name</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">from</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> subjects s</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">    </span><span style="font-size: 22px; color: rgb(54, 101, 238); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">,</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> grade g </span><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">where</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> s.grade_id = g.grade_id</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">//注：join on并不相当于where的第一个条件，如果需要附加条件，应该先添加where，再使用and，</span><span style="font-size: 22px;"><span style="font-size: 22px; color: rgb(255, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">而不是直接在join on 后面添加and</span></span></div><div><span style="font-size: 14pt;">#非等值连接查询（表笛卡尔积，不建议使用，结果为两张表的数据乘积）</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">#<span style="font-size: 14pt; color: rgb(26, 173, 224);">外连接</span></span></div><div><span style="font-size: 14pt;">//保证其中一张表的数据是完整的</span></div><div><span style="font-size: 14pt;">//外连接实现了一种需求：“</span><span style="font-size: 14pt; color: rgb(30, 204, 255);">想要从多个表中获取数据，确定了某种条件，但是想要其中一张表单的所有数据</span><span style="font-size: 14pt;">”</span></div><div><span style="font-size: 14pt;">##左外连接</span></div><div><span style="font-size: 18.6667px;">//从左表</span><span style="font-size: 18.6667px; color: rgb(255, 70, 53);">返回所有的记录</span><span style="font-size: 18.6667px;">，即使在右表没有匹配的数据，该数据位使用null代替</span></div><div><span style="font-size: 14pt;">//说人话就是在on的查询条件下，再添加所有左表中的其他数据项</span></div><div><span style="font-size: 18.6667px;">select s.subj_name,g.grade_name </span><span style="font-size: 18.6667px;">from subjects s</span> <span style="font-size: 18.6667px; color: rgb(30, 204, 255);">left</span> <span style="font-size: 18.6667px;"><span style="font-size: 18.6667px; color: rgb(30, 204, 255);">join</span> grade g</span> <span style="font-size: 18.6667px; color: rgb(30, 204, 255);">on</span> <span style="font-size: 18.6667px;">s.grade_id=g.grade_id </span></div><div><span style="font-size: 14pt;">##右外连接</span></div><div><span style="font-size: 14pt;">//从右表返回所有的记录，即使在左表没有匹配的数据</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">##多表连接查询规范：</span></div><div><span style="font-size: 14pt;">select * from </span></div><div><span style="font-size: 18.6667px;">表A </span></div><div><span style="font-size: 18.6667px;">left join </span><span style="font-size: 18.6667px;">表B</span> <span style="font-size: 18.6667px;">on 连接条件</span></div><div><span style="font-size: 18.6667px;">left join 表C on 连接条件</span></div><div><span style="font-size: 14pt;">//每一次join对应一个条件</span></div><div><span style="font-size: 18.6667px;">where 其他条件</span></div><div><span style="font-size: 18.6667px;"> </span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">#自连接（表自己跟自己关联）</span></div><div><span style="font-size: 14pt;">select e2.employee_id,last_name from employee e1 , employee e2 where</span></div><div><span style="font-size: 14pt;">e1.manager_id = e2.employee_id </span></div><div><span style="font-size: 14pt;">and</span></div><div><span style="font-size: 14pt;">e1.last_name='Chen'</span></div><div><span style="font-size: 14pt;">//解读：一个确定姓名的员工的上司的信息</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;">#将查询结果排序</span></div><div><span style="font-size: 14pt;">//关键字：order by 列 [desc/asc] </span></div><div><span style="font-size: 14pt;">//desc：降序    asc：升序（默认）</span></div><div><span style="font-size: 14pt;">//写在where后面（如果有where的话）</span></div><div><span style="font-size: 14pt;">select * from results <span style="font-size: 14pt; color: rgb(30, 204, 255);">order by stu_result desc</span><span style="font-size: 14pt; color: rgb(255, 70, 53);"> ,subj_no</span></span></div><div><span style="font-size: 14pt;">//在使用stu_result后降序排序后，使用subj_no升序排序</span></div><div><br/></div><div><span style="font-size: 14pt;">#分页查询</span></div><div><span style="font-size: 14pt;">//关键字：limit [起始行（默认为0，第一行）] ,条数</span></div><div><span style="font-size: 14pt;">//包含起始行</span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(255, 70, 53);">//在分页查询前必须排序</span></span></div><div><span style="font-size: 14pt;">select * from results order by stu_result limit 1,5;</span></div><div><span style="font-size: 14pt;">//从第2条后面查5条</span></div><div><span style="font-size: 14pt;">//不需要括号之类</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 14pt;"><span style="font-size: 14pt; color: rgb(255, 70, 53);">#子查询</span></span></div><div><span style="font-size: 14pt;">//在where条件或者from或者select中添加另一次查询（相当于将函数结果返回给条件、范围、需求）</span></div><div><span style="font-size: 14pt;">#子查询可能返回一个值，或者多个值</span></div><div><span style="font-size: 14pt;">1.***[比较运算符&gt;|=|&lt;]子查询，子查询只能返回唯一值</span></div><div><span style="font-size: 14pt;">2.*** in 子查询，子查询可以返回多个值</span></div><div><span style="font-size: 14pt;">//仅仅举个例子，需要列表形式的地方都可以返回多个值</span></div><div><span style="font-size: 14pt;">##<span style="font-size: 14pt; color: rgb(30, 204, 255);">子查询使用条件（为什么不用连接查询？）</span></span></div><div><span style="font-size: 14pt;">1.查询结果中几个结果出现在几个表中就需要连接几个表</span></div><div><span style="font-size: 14pt;">2.缺少的条件，使用子查询替代</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">select</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> employee_id,</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">    last_name,</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">    salary,</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">    department_id</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">from</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> employees</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">where</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> salary &gt; (</span><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">select</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> salary</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">                </span><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">from</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> employees</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">                </span><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">where</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> employee_id =(</span><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">select</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> manager_id</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">                                    </span><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">from</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> employees</span></div><div style="background-color: rgb(255, 255, 255); font-size: 22px; white-space: pre;"><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">                                    </span><span style="font-size: 22px; color: rgb(0, 0, 255); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">where</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;"> last_name =</span><span style="font-size: 22px; color: rgb(163, 21, 21); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">'Abel'</span><span style="font-size: 22px; color: rgb(0, 0, 0); font-family: Consolas, &quot;Courier New&quot;, monospace; line-height: 30px;">))</span></div><div><span style="font-size: 14pt;">//在某些情况下，可以将查询结果组成一张新的表给予from与另一张表连接</span></div><div><span style="font-size: 14pt;">//这里容易产生思维定视，select中需要查找的项不一定要from查询的表，只需要符合规则并且满足查询需求即可</span></div><div><span style="font-size: 14pt;">//select *,4*4 from students</span></div><div style="font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 51, 179); font-family: &quot;JetBrains Mono&quot;, monospace;">select</span> <span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">e1</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">.</span><span style="font-size: 15pt; color: rgb(135, 16, 148); font-family: &quot;JetBrains Mono&quot;, monospace;">empno</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">,</span></div><div style="font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">e1</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">.</span><span style="font-size: 15pt; color: rgb(135, 16, 148); font-family: &quot;JetBrains Mono&quot;, monospace;">deptno</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">,</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">(</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 51, 179); font-family: &quot;JetBrains Mono&quot;, monospace;">select</span> <span style="font-size: 15pt; color: rgb(0, 98, 122); font-family: &quot;JetBrains Mono&quot;, monospace; font-style: italic;">count</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">(</span><span style="font-size: 15pt; color: rgb(23, 80, 235); font-family: &quot;JetBrains Mono&quot;, monospace;">1</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">)</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 51, 179); font-family: &quot;JetBrains Mono&quot;, monospace;">from</span> <span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">emp</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 51, 179); font-family: &quot;JetBrains Mono&quot;, monospace;">where</span> <span style="font-size: 15pt; color: rgb(135, 16, 148); font-family: &quot;JetBrains Mono&quot;, monospace;">deptno</span> <span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">= (</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 51, 179); font-family: &quot;JetBrains Mono&quot;, monospace;">select</span> <span style="font-size: 15pt; color: rgb(135, 16, 148); font-family: &quot;JetBrains Mono&quot;, monospace;">deptno</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 51, 179); font-family: &quot;JetBrains Mono&quot;, monospace;">from</span> <span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">emp e2</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 51, 179); font-family: &quot;JetBrains Mono&quot;, monospace;">where</span> <span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">e2</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">.</span><span style="font-size: 15pt; color: rgb(135, 16, 148); font-family: &quot;JetBrains Mono&quot;, monospace;">empno</span> <span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">=</span> <span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">e1</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">.</span><span style="font-size: 15pt; color: rgb(102, 14, 122); font-family: &quot;JetBrains Mono&quot;, monospace; font-weight: bold;">empno</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">)</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">)</span> <span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">'</span><span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: 宋体, monospace;">部门人数</span><span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">'</span></div><div style="background-color: rgb(255, 255, 255); font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 51, 179); font-family: &quot;JetBrains Mono&quot;, monospace;">from</span> <span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">emp e1</span></div><div style="font-size: 15pt;"><span style="font-size: 15pt; color: rgb(0, 51, 179); font-family: &quot;JetBrains Mono&quot;, monospace;">where</span> <span style="font-size: 15pt; color: rgb(0, 0, 0); font-family: &quot;JetBrains Mono&quot;, monospace;">e1</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">.</span><span style="font-size: 15pt; color: rgb(135, 16, 148); font-family: &quot;JetBrains Mono&quot;, monospace;">job</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">=</span> <span style="font-size: 15pt; color: rgb(6, 125, 23); font-family: &quot;JetBrains Mono&quot;, monospace;">'clerk'</span><span style="font-size: 15pt; color: rgb(8, 8, 8); font-family: &quot;JetBrains Mono&quot;, monospace;">;</span></div><div><span style="font-size: 14pt;"><br/></span></div><div><span style="font-size: 18.6667px;">#分组查询</span></div><div><span style="font-size: 18.6667px;">//group by 列[,多列]（多列的情况下是在当前分组的情况下再分组）</span></div><div><span style="font-size: 14pt;">//必须写在where后面</span></div><div><span style="font-size: 14pt;">//分组就是根据某些列进行分组（比如序号相同的为一组）</span></div><div><span style="font-size: 14pt;">//分组后，每个组只显示一行数据，所以</span><span style="font-size: 14pt; color: rgb(255, 0, 0);">需要对其他列进行处理</span></div><div><span style="font-size: 14pt;">//查询结果的列一定是<span style="font-size: 14pt; color: rgb(255, 0, 0);">当前</span><span style="font-size: 14pt; color: rgb(255, 0, 0);">分组中所有数据的处理结果</span></span></div><div><span style="font-size: 14pt;">select s.su</span><span style="font-size: 14pt;">,s.subj_name,</span><span style="font-size: 14pt; color: rgb(30, 204, 255);">avg(r.stu_result),count(1)</span><span style="font-size: 14pt;"> from subjects s,result r</span><span style="font-size: 14pt;">bj_no</span></div><div><span style="font-size: 14pt;">where s.subj_no=r.subj_no</span></div><div><span style="font-size: 14pt;">group by s.subj_no</span></div><div><span style="font-size: 14pt;">having avg(r.stu_result) &gt;=80</span></div><div><span style="font-size: 14pt;">//having用于</span><span style="font-size: 14pt; color: rgb(255, 70, 53);">对分组结果进行过滤</span><span style="font-size: 14pt;">，不可以单独使用</span></div><div><span style="font-size: 14pt;">//having的效果等同于where，但是因为</span><span style="font-size: 14pt; color: rgb(77, 206, 29);">having在分组之后执行</span><span style="font-size: 14pt;">，所以消耗的资源比where少</span></div><div><span style="font-size: 18.6667px;">使用分组查询的情景：</span></div><div><span style="font-size: 18.6667px;">1.需要对结果进行分组</span></div><div><span style="font-size: 18.6667px;">2.结果中出现了多条合并过的数据（比如查询</span><span style="font-size: 18.6667px; color: rgb(255, 0, 0);">每一个</span><span style="font-size: 18.6667px;">属性的最大值）</span></div><div><span style="font-size: 14pt;">//注意这个</span><span style="font-size: 14pt; color: rgb(255, 0, 0);">每一个</span><span style="font-size: 14pt;">，</span><span style="font-size: 14pt; color: rgb(255, 0, 0);">单条</span><span style="font-size: 14pt;">数据的最大值不需要分组</span></div></span>
</article><!-- lincense--><div class="license-wrapper"><p> <span>Author:  </span><a href="http://yoursite.com">jacketzc</a></p><p> <span>Link:  </span><a href="http://yoursite.com/2020/06/02/04DQL%EF%BC%88%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80%EF%BC%89/">http://yoursite.com/2020/06/02/04DQL%EF%BC%88%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2%E8%AF%AD%E8%A8%80%EF%BC%89/</a></p><p> <span>Copyright:  </span><span>All articles in this blog are licensed under <a rel="license noopener" target="_blank" href="https://creativecommons.org/licenses/by-nc-nd/3.0">CC BY-NC-SA 3.0</a> unless stating additionally.</span></p></div><div class="post-paginator"><a class="prevSlogan" href="/2020/06/02/10%E5%88%B7%E9%A2%98%E5%8F%91%E7%8E%B0/" title="10刷题发现"><span>< PreviousPost</span><br><span class="prevTitle">10刷题发现</span></a><a class="nextSlogan" href="/2020/06/02/03DML%EF%BC%88%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E8%AF%AD%E8%A8%80%EF%BC%89/" title="03DML（数据操作语言）"><span>NextPost ></span><br><span class="nextTitle">03DML（数据操作语言）</span></a><div class="clear"></div></div><div id="comment"></div></section></article><footer id="cxo-footer-outer"><div id="cxo-footer-inner"><p class="footer-container"><span>Site by </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span> | theme </span><a target="_blank" rel="noopener" href="https://github.com/Longlongyu/hexo-theme-Cxo"><span>Cxo</span></a></p><i class="fa fa-user"> </i><span id="busuanzi_value_site_uv"></span><span> | </span><i class="fa fa-eye"> </i><span id="busuanzi_value_site_pv"></span></div></footer><!-- catelog--><div class="toc-wrapper" style="top: 70vh;"><div class="toc-catalog"><i class="fa fa-list"> </i><span>CATALOG</span></div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link"><span class="toc-number">1.</span> <span class="toc-text">04DQL（数据查询语言）</span></a></li></ol></div><!-- top--><i class="fa fa-arrow-up close" id="go-up" aria-hidden="true"></i></body></html>